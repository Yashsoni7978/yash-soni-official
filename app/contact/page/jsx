"use client";

import { useState } from "react";
import { motion } from "framer-motion";
import { Phone, Mail, MapPin, Instagram, Youtube, MessageCircle, Send, Clock, CheckCircle } from "lucide-react";

// --- INLINE COMPONENTS (To avoid missing file errors) ---
const ScrollReveal = ({ children, direction = "up", className = "" }) => {
  const variants = {
    hidden: { 
      opacity: 0, 
      x: direction === "left" ? -50 : direction === "right" ? 50 : 0, 
      y: direction === "up" ? 50 : 0 
    },
    visible: { opacity: 1, x: 0, y: 0 }
  };
  return (
    <motion.div
      initial="hidden"
      whileInView="visible"
      viewport={{ once: true }}
      transition={{ duration: 0.6 }}
      variants={variants}
      className={className}
    >
      {children}
    </motion.div>
  );
};

const StaggerContainer = ({ children, className }) => (
  <motion.div
    initial="hidden"
    whileInView="show"
    viewport={{ once: true }}
    variants={{
      hidden: {},
      show: { transition: { staggerChildren: 0.1 } }
    }}
    className={className}
  >
    {children}
  </motion.div>
);

const StaggerItem = ({ children }) => (
  <motion.div
    variants={{
      hidden: { opacity: 0, y: 20 },
      show: { opacity: 1, y: 0 }
    }}
  >
    {children}
  </motion.div>
);

const serviceCategories = [
  {
    group: "Anchoring Services",
    options: ["Wedding Anchor", "Corporate Event Anchor", "Fashion Show Host", "Sangeet & Haldi Hosting", "Kids Event Hosting", "Pool Party / Social Event"],
  },
  {
    group: "Event Management",
    options: ["Full Event Planning", "Event Designing & Decor", "Wedding Planning", "Sangeet Choreography", "Destination Wedding", "Corporate Event Production"],
  },
  {
    group: "Combined Services",
    options: ["Anchoring + Event Management", "Complete Wedding Package", "Corporate Event Package"],
  },
];

export default function Contact() {
  const [formData, setFormData] = useState({
    name: "",
    email: "",
    phone: "",
    service: "",
    eventDate: "",
    location: "",
    budget: "",
    message: "",
  });
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsSubmitting(true);
    
    // Simulate delay
    await new Promise((resolve) => setTimeout(resolve, 1000));

    // Format WhatsApp Message
    const messageText = `*New Event Inquiry* üé§
----------------
üë§ *Name:* ${formData.name}
üìû *Phone:* ${formData.phone}
üìß *Email:* ${formData.email}
üìÖ *Date:* ${formData.eventDate}
üìç *Location:* ${formData.location}
üí∞ *Budget:* ${formData.budget}
‚ú® *Service:* ${formData.service}
üìù *Note:* ${formData.message}`;

    const phoneNumber = "917737877978"; 
    const encodedMessage = encodeURIComponent(messageText);
    const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;

    // Open WhatsApp
    window.open(whatsappUrl, '_blank');
    
    // Reset Form
    setFormData({
      name: "", email: "", phone: "", service: "", eventDate: "", location: "", budget: "", message: "",
    });
    
    setIsSubmitting(false);
  };

  // Schema Markup for SEO
  const schemaData = {
    "@context": "https://schema.org",
    "@type": "ContactPage",
    "name": "Contact Anchor Yash Soni",
    "url": "https://yashsoni.in/contact",
    "description": "Book Anchor Yash Soni for your event. Contact details, phone number, and booking form for weddings and corporate events in Jaipur.",
    "mainEntity": {
      "@type": "LocalBusiness",
      "name": "Anchor Yash Soni Events",
      "telephone": "+917737877978",
      "email": "yashsoni7978@gmail.com",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Jaipur",
        "addressRegion": "Rajasthan",
        "addressCountry": "IN"
      }
    }
  };

  return (
    <div className="bg-neutral-950 text-white min-h-screen">
      <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(schemaData) }} />

      {/* Hero Section */}
      <section className="pt-32 pb-16 md:pt-40 md:pb-20 relative overflow-hidden">
        <div className="absolute inset-0 bg-gradient-to-b from-amber-500/5 via-transparent to-transparent" />
        
        <div className="container mx-auto px-4 relative text-center">
          <ScrollReveal>
            <span className="text-amber-500 text-sm font-medium uppercase tracking-wider">
              Get In Touch
            </span>
            <h1 className="text-4xl md:text-6xl font-display font-bold mt-4 mb-6">
              Book <span className="text-amber-500">Your Event</span>
            </h1>
            <p className="text-gray-400 text-lg max-w-2xl mx-auto">
              Ready to create an unforgettable event? Fill out the form below and connect with me directly on WhatsApp.
            </p>
          </ScrollReveal>
        </div>
      </section>

      {/* Contact Section */}
      <section className="py-12 md:py-20 container mx-auto px-4">
        <div className="grid lg:grid-cols-5 gap-12">
          
          {/* Contact Info (Left Side) */}
          <ScrollReveal direction="left" className="lg:col-span-2 space-y-8">
            <div>
              <h2 className="text-2xl font-display font-bold mb-6 text-white">Contact Information</h2>
              <StaggerContainer className="space-y-6">
                
                <StaggerItem>
                  <a href="tel:+917737877978" className="flex items-start gap-4 group">
                    <div className="w-12 h-12 bg-amber-500/10 rounded-xl flex items-center justify-center group-hover:bg-amber-500/20 transition-colors">
                      <Phone className="w-5 h-5 text-amber-500" />
                    </div>
                    <div>
                      <p className="text-sm text-gray-400">Phone</p>
                      <p className="font-semibold text-white group-hover:text-amber-500 transition-colors">+91 77378 77978</p>
                    </div>
                  </a>
                </StaggerItem>

                <StaggerItem>
                  <a href="mailto:yashsoni7978@gmail.com" className="flex items-start gap-4 group">
                    <div className="w-12 h-12 bg-amber-500/10 rounded-xl flex items-center justify-center group-hover:bg-amber-500/20 transition-colors">
                      <Mail className="w-5 h-5 text-amber-500" />
                    </div>
                    <div>
                      <p className="text-sm text-gray-400">Email</p>
                      <p className="font-semibold text-white group-hover:text-amber-500 transition-colors break-all">yashsoni7978@gmail.com</p>
                    </div>
                  </a>
                </StaggerItem>

                <StaggerItem>
                  <div className="flex items-start gap-4">
                    <div className="w-12 h-12 bg-amber-500/10 rounded-xl flex items-center justify-center">
                      <MapPin className="w-5 h-5 text-amber-500" />
                    </div>
                    <div>
                      <p className="text-sm text-gray-400">Location</p>
                      <p className="font-semibold text-white">Jaipur, Rajasthan, India</p>
                    </div>
                  </div>
                </StaggerItem>

                <StaggerItem>
                  <div className="flex items-start gap-4">
                    <div className="w-12 h-12 bg-amber-500/10 rounded-xl flex items-center justify-center">
                      <Clock className="w-5 h-5 text-amber-500" />
                    </div>
                    <div>
                      <p className="text-sm text-gray-400">Response Time</p>
                      <p className="font-semibold text-white">Within 24 hours</p>
                    </div>
                  </div>
                </StaggerItem>

              </StaggerContainer>
            </div>

            {/* Quick Contact Buttons */}
            <div className="space-y-4">
              <h3 className="font-display font-semibold">Quick Contact</h3>
              <div className="flex flex-wrap gap-3">
                <a href="https://wa.me/917737877978" target="_blank" rel="noopener noreferrer">
                  <button className="flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-all text-sm">
                    <MessageCircle className="w-5 h-5" /> WhatsApp
                  </button>
                </a>
                <a href="tel:+917737877978">
                  <button className="flex items-center gap-2 px-6 py-3 border border-neutral-700 hover:border-amber-500 text-white hover:text-amber-500 font-bold rounded-lg transition-all text-sm">
                    <Phone className="w-5 h-5" /> Call Now
                  </button>
                </a>
              </div>
            </div>

            {/* Social Links */}
            <div className="space-y-4">
              <h3 className="font-display font-semibold">Follow Us</h3>
              <div className="flex gap-4">
                <a href="https://instagram.com/anchor_yash_official" target="_blank" rel="noopener noreferrer" className="w-12 h-12 rounded-xl border border-neutral-700 flex items-center justify-center hover:border-amber-500 hover:text-amber-500 text-white transition-all">
                  <Instagram className="w-5 h-5" />
                </a>
                <a href="https://www.youtube.com/@Anchor_Yash" target="_blank" rel="noopener noreferrer" className="w-12 h-12 rounded-xl border border-neutral-700 flex items-center justify-center hover:border-amber-500 hover:text-amber-500 text-white transition-all">
                  <Youtube className="w-5 h-5" />
                </a>
              </div>
            </div>

            {/* Map */}
            <div className="aspect-video bg-neutral-900 border border-neutral-800 rounded-xl overflow-hidden">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3557.067822978002!2d75.787288!3d26.912433!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x396db47224d4c5a7%3A0x694697926b01a115!2sJaipur%2C%20Rajasthan!5e0!3m2!1sen!2sin!4v1709664567890!5m2!1sen!2sin"
                width="100%"
                height="100%"
                style={{ border: 0 }}
                allowFullScreen
                loading="lazy"
                referrerPolicy="no-referrer-when-downgrade"
                title="Anchor Yash Location - Jaipur"
              />
            </div>
          </ScrollReveal>

          {/* Contact Form (Right Side) */}
          <ScrollReveal direction="right" className="lg:col-span-3">
            <div className="bg-neutral-900 border border-neutral-800 rounded-2xl p-6 md:p-10">
              <h2 className="text-2xl font-display font-bold mb-6 text-white">Send a Booking Inquiry</h2>
              
              <form onSubmit={handleSubmit} className="space-y-6">
                <div className="grid sm:grid-cols-2 gap-6">
                  <div>
                    <label className="block text-sm font-medium mb-2 text-gray-400">Your Name *</label>
                    <input type="text" name="name" value={formData.name} onChange={handleChange} required className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors" placeholder="John Doe" />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-2 text-gray-400">Phone Number *</label>
                    <input type="tel" name="phone" value={formData.phone} onChange={handleChange} required className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors" placeholder="+91 98765 43210" />
                  </div>
                </div>

                <div>
                  <label className="block text-sm font-medium mb-2 text-gray-400">Email Address *</label>
                  <input type="email" name="email" value={formData.email} onChange={handleChange} required className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors" placeholder="you@example.com" />
                </div>

                <div>
                  <label className="block text-sm font-medium mb-2 text-gray-400">Service Required *</label>
                  <select name="service" value={formData.service} onChange={handleChange} required className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors">
                    <option value="">Select a service</option>
                    {serviceCategories.map((category) => (
                      <optgroup key={category.group} label={category.group}>
                        {category.options.map((option) => (
                          <option key={option} value={option}>{option}</option>
                        ))}
                      </optgroup>
                    ))}
                  </select>
                </div>

                <div className="grid sm:grid-cols-2 gap-6">
                  <div>
                    <label className="block text-sm font-medium mb-2 text-gray-400">Event Date *</label>
                    <input type="date" name="eventDate" value={formData.eventDate} onChange={handleChange} required className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors" />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-2 text-gray-400">Event Location *</label>
                    <input type="text" name="location" value={formData.location} onChange={handleChange} required className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors" placeholder="Venue or City" />
                  </div>
                </div>

                <div>
                  <label className="block text-sm font-medium mb-2 text-gray-400">Budget Range</label>
                  <select name="budget" value={formData.budget} onChange={handleChange} className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors">
                    <option value="">Select budget range</option>
                    <option value="15k-25k">‚Çπ15,000 - ‚Çπ25,000</option>
                    <option value="25k-50k">‚Çπ25,000 - ‚Çπ50,000</option>
                    <option value="50k-1L">‚Çπ50,000 - ‚Çπ1,00,000</option>
                    <option value="1L+">‚Çπ1,00,000+</option>
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium mb-2 text-gray-400">Tell Us About Your Event</label>
                  <textarea name="message" value={formData.message} onChange={handleChange} rows={4} className="w-full px-4 py-3 bg-black border border-neutral-700 rounded-lg focus:outline-none focus:border-amber-500 text-white transition-colors resize-none" placeholder="Share details about your event..." />
                </div>

                <motion.button 
                  whileHover={{ scale: 1.02 }}
                  whileTap={{ scale: 0.98 }}
                  type="submit" 
                  disabled={isSubmitting}
                  className="w-full py-4 bg-amber-500 hover:bg-amber-600 text-black font-bold rounded-lg transition-all flex items-center justify-center gap-2"
                >
                  {isSubmitting ? "Processing..." : <><Send className="w-5 h-5" /> Send Inquiry via WhatsApp</>}
                </motion.button>
              </form>
            </div>
          </ScrollReveal>

        </div>
      </section>

      {/* Trust Indicators */}
      <section className="py-12 bg-neutral-900 border-t border-neutral-800">
        <div className="container mx-auto px-4">
          <StaggerContainer className="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            {[{ icon: CheckCircle, label: "Quick Response" }, { icon: Clock, label: "24/7 Available" }, { icon: MapPin, label: "Pan India Service" }, { icon: MessageCircle, label: "Free Consultation" }].map((item) => (
              <StaggerItem key={item.label}>
                <div className="flex flex-col items-center group">
                  <item.icon className="w-8 h-8 text-amber-500 mb-3 group-hover:scale-110 transition-transform" />
                  <span className="text-sm font-medium text-white">{item.label}</span>
                </div>
              </StaggerItem>
            ))}
          </StaggerContainer>
        </div>
      </section>

    </div>
  );
}